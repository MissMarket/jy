# 前端架构与UI设计方案

## 1. 项目分析

### 1.1 现有结构
- **App.vue**：主应用组件，包含侧边导航菜单
- **views/home/index.vue**：交易策略回测系统
- **views/basedata/index.vue**：历史数据查询
- **views/strategy/index.vue**：交易策略评估
- **dataModule/index.js**：数据模块，提供股票历史数据
- **signalModule/index.js**：信号模块，实现JMA算法

### 1.2 主要问题
- **重复代码**：calculateShape、calculateTradingSignal等函数在多个页面重复
- **代码组织**：缺乏模块化，逻辑分散在各个页面
- **UI风格**：使用默认的Element Plus样式，缺乏个性化
- **移动端适配**：当前设计未考虑移动端

### 1.3 新增需求
- **移动端适配**：Strategy页面需要适配移动端
- **移动端专用**：移动端只需要Strategy页面
- **PC端重构**：三个页面都需要在PC端重构

## 2. 前端架构优化方案

### 2.1 模块化重构

#### 2.1.1 工具函数模块化
- 创建 `utils/index.js`，集中管理通用工具函数
  - `calculateShape`：计算交易形态
  - `calculateTradingSignal`：计算交易信号
  - `normalizePrices`：价格归一化
  - `calculateATR14`：计算平均真实波动

#### 2.1.2 状态管理优化
- 对于复杂状态，使用组合式函数管理
- 创建 `composables/useStockData.js`：股票数据管理
- 创建 `composables/useStrategy.js`：策略计算管理
- 创建 `composables/useResponsive.js`：响应式布局管理

#### 2.1.3 组件化
- 创建可复用组件
  - `components/StockSelector.vue`：股票选择器
  - `components/StrategyResult.vue`：策略结果展示
  - `components/TradingSignal.vue`：交易信号展示
  - `components/MobileHeader.vue`：移动端头部组件

### 2.2 响应式设计架构

#### 2.2.1 路由适配
- 检测设备类型，移动端直接显示Strategy页面
- PC端保持原有导航结构

#### 2.2.2 布局适配
- 使用CSS媒体查询实现响应式布局
- 为移动端设计专用布局
- 关键断点：768px（平板）、480px（手机）

## 3. UI设计方案

### 3.1 设计风格
- **主题**：米哈游二次元风格
- **色彩**：
  - 主色调：#FF6B6B（珊瑚粉）
  - 辅助色：#4ECDC4（薄荷绿）、#FFD166（柠檬黄）
  - 背景色：#F7F9FC（淡蓝灰）
  - 文字色：#2A3B4C（深蓝灰）
- **字体**：
  - 主字体：Noto Sans SC
  - 标题字体：使用更有二次元风格的字体
- **元素风格**：
  - 圆角边框：8-12px
  - 轻微阴影：营造层次感
  - 渐变效果：用于强调元素
  - 动画效果：平滑过渡和微交互

### 3.2 PC端页面设计

#### 3.2.1 侧边栏导航
- 采用垂直导航菜单
- 每个菜单项包含图标和文字
- 激活状态有特殊动画效果
- 背景使用渐变色彩

#### 3.2.2 主内容区
- 卡片式布局，带有轻微阴影
- 标题区域使用二次元风格装饰
- 表格设计优化，增加色彩区分
- 按钮和交互元素使用圆角设计

#### 3.2.3 数据可视化
- 图表使用柔和的色彩
- 增加动画效果
- 数据变化时有过渡效果

### 3.3 移动端页面设计

#### 3.3.1 专用页面结构
- 单页面应用，只包含Strategy功能
- 顶部导航栏，包含标题和基本操作
- 卡片式布局，垂直排列
- 优化触摸交互

#### 3.3.2 响应式表格
- 移动端表格转换为卡片式列表
- 关键信息优先展示
- 支持滑动查看更多信息

#### 3.3.3 交互优化
- 增大点击区域
- 简化操作流程
- 优化表单输入

## 4. 技术实现

### 4.1 样式方案
- 使用SCSS预处理器
- 采用CSS变量管理主题色彩
- 自定义Element Plus样式
- 实现动画和过渡效果

### 4.2 响应式实现
- 使用CSS媒体查询
- 移动端检测逻辑
- 自适应布局

### 4.3 组件实现
- 保留核心功能逻辑
- 重构UI组件
- 实现新的视觉效果
- 移动端专用组件

### 4.4 性能优化
- 懒加载组件
- 缓存计算结果
- 优化渲染性能
- 移动端性能优化

## 5. 具体实现步骤

### 5.1 准备工作
1. 安装必要依赖（SCSS等）
2. 创建目录结构
3. 配置响应式布局基础

### 5.2 模块化重构
1. 提取通用工具函数
2. 创建组合式函数
3. 开发可复用组件

### 5.3 UI设计实现
1. 实现主题色彩和样式
2. 重构侧边栏导航（PC端）
3. 优化主内容区布局（PC端）
4. 设计移动端专用页面
5. 实现页面动画效果

### 5.4 页面重构

#### 5.4.1 PC端页面
1. 重构Home页面
2. 重构BaseData页面
3. 重构Strategy页面
4. 优化App.vue

#### 5.4.2 移动端页面
1. 创建移动端专用Strategy页面
2. 实现移动端适配逻辑
3. 优化移动端交互

### 5.5 测试与优化
1. 功能测试
2. 性能测试
3. 响应式测试
4. 代码质量检查

## 6. 预期效果

### 6.1 架构优化效果
- 代码重复率降低50%以上
- 代码可读性和可维护性显著提升
- 开发效率提高

### 6.2 UI设计效果
- 实现米哈游二次元风格
- 界面美观度显著提升
- 用户体验改善
- 交互更加流畅

### 6.3 响应式效果
- PC端完整功能
- 移动端专用布局
- 无缝适配不同设备

## 7. 技术栈

### 7.1 核心技术
- Vue 3 + Composition API
- SCSS
- Element Plus（部分组件）
- 自定义组件

### 7.2 工具库
- dayjs：日期处理
- lodash：工具函数
- （可选）Chart.js：数据可视化

## 8. 注意事项

### 8.1 兼容性
- 确保在主流浏览器中正常运行
- 移动端适配主流设备

### 8.2 性能
- 避免过度动画影响性能
- 优化大数据量处理
- 移动端性能优先

### 8.3 可维护性
- 保持代码结构清晰
- 遵循Vue 3最佳实践
- 文档完善

### 8.4 功能完整性
- 确保PC端三个页面功能完整
- 移动端Strategy页面功能完整
- 数据一致性